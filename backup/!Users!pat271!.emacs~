;; Added by Package.el.  This must come before configurations of
;; installed packages.  Don't delete this line.  If you don't want it,
;; just comment it out by adding a semicolon to the start of the line.
;; You may delete these explanatory comments.
(package-initialize)
(require 'package)
(add-to-list 'package-archives
             '("melpa-stable" . "https://stable.melpa.org/packages/"))
(package-initialize)



(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(custom-enabled-themes (quote (spacemacs-light)))
 '(custom-safe-themes
   (quote
    ("fa2b58bb98b62c3b8cf3b6f02f058ef7827a8e497125de0254f56e373abee088" "bffa9739ce0752a37d9b1eee78fc00ba159748f50dc328af4be661484848e476" default)))
 '(ess-swv-pdflatex-commands (quote ("pdflatex" "texi2pdf" "make")))
 '(org-agenda-files (quote ("~/Desktop/my-planner.org")))
 '(org-confirm-babel-evaluate nil)
 '(package-archives
   (quote
    (("melpa-stable" . "https://stable.melpa.org/packages/")
     ("gnu" . "http://elpa.gnu.org/packages/")
     ("melpa" . "http://melpa.milkbox.net/packages/"))))
 '(package-selected-packages
   (quote
    (spacemacs-theme flucui-themes magit org2blog openwith org-bullets ess-view auctex markdown-mode markchars))))

(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 )

;; Automatically enter debug mode upon error
;;(setq debug-on-error t)

;; Always show line numbers
(global-linum-mode t)
(setq linum-format "%4d \u2502 ")

;; backup in one place. flat, no tree structure
(setq backup-directory-alist '(("" . "~/.emacs.d/backup")))

;; Rmarkdown stuff
(put 'upcase-region 'disabled nil)
(autoload 'markdown-mode "markdown-mode" "Major mode for editing Markdown files" t) (add-to-list 'auto-mode-alist'("\.text\'" . markdown-mode)) (add-to-list 'auto-mode-alist'("\.markdown\'" . markdown-mode)) (add-to-list 'auto-mode-alist'("\.md\'" . markdown-mode))
(setq load-path (append '("~/.emacs.d/polymode/" "/home/jsg/.emacs.d/polymode/modes") load-path))
(require 'poly-R) (require 'poly-markdown)
(global-unset-key (kbd "C-z"))

(require 'ess-site)
(ess-toggle-underscore nil)

;;Re-load your buffers from the previous session on startup
;;(desktop-save-mode 1)

;;ess-view
(require 'ess-view)
(setq ess-view--spreadsheet-program "/Applications/Tad.app/Contents/MacOS/Tad")

;; Automatically start up polymode for .Rmd documents
(add-to-list 'auto-mode-alist '("\\.Rmd" . poly-markdown+r-mode))

;; Connect to Owens (OSC)
(defun connect-remote ()
  (interactive)
  (dired "/ssh:osu8143@owens.osc.edu:/users/PAS1143/osu8143/"))

;; Disable the splash screen (to enable it agin, replace the t with 0)
(setq inhibit-splash-screen t)

;; Enable transient mark mode
(transient-mark-mode 1)

;;;;Org mode configuration
;; Enable Org mode
(require 'org)
;; Make Org mode work with files ending in .org
 (add-to-list 'auto-mode-alist '("\\.org$" . org-mode))
;; The above is the default in recent emacsen

;; Fancy org-bullets
(require 'org-bullets)
(add-hook 'org-mode-hook (lambda () (org-bullets-mode 1)))

;; Hide emphasis markers
(setq org-hide-emphasis-markers t)

;; Useful keybindings for org trees
(define-key global-map "\C-cl" 'org-store-link)
(define-key global-map "\M-Up" 'org-move-subtree-up)
(define-key global-map "\C-ca" 'org-agenda)
(setq org-log-done t)

;; Have locate use spotlight search (Mac only)
(setq locate-command "mdfind")

;; Transpose buffer location with C-x 4 t
(defun transpose-windows (arg)
  "Transpose the buffers shown in two windows."
  (interactive "p")
  (let ((selector (if (>= arg 0) 'next-window 'previous-window)))
    (while (/= arg 0)
      (let ((this-win (window-buffer))
	    (next-win (window-buffer (funcall selector))))
	(set-window-buffer (selected-window) next-win)
	(set-window-buffer (funcall selector) this-win)
	(select-window (funcall selector)))
      (setq arg (if (plusp arg) (1- arg) (1+ arg))))))

;; Transpose windows with C-x 4 t
(define-key ctl-x-4-map (kbd "t") 'transpose-windows)

;; Make Preview the default pdf viewer
(progn					
    (require 'openwith)                                                    
    (openwith-mode t)                                                      
    (setq openwith-associations '(("\\.pdf\\'" "/Applications/Preview.app/Contents/MacOS/Preview" (file))))          
)

;;org2blog
(setq load-path (cons "~/org2blog/" load-path))
(require 'org2blog-autoloads)

(setq org2blog/wp-blog-alist
      '(("wordpress"
         :url "https://thescientificshrimper.wordpress.com/xmlrpc.php"
         :username "andyptt21"
         :default-title "The Scientific Shrimper"
         :default-categories ("org2blog" "emacs")
         :tags-as-categories nil)))

;;org-babel
(org-babel-do-load-languages
 'org-babel-load-languages
 '((R . t)))
(setq org-startup-with-inline-images t)

;;orgMobile
(setq org-mobile-directory "~/Dropbox/MobileOrg")

;;Magit
(global-set-key (kbd "C-x g") 'magit-status)
